{% extends "base.html" %}

{% block content %}
    <style>
        body {
            background-color: #f5f5f5;
            font-family: Arial, sans-serif;
        }

        h1 {
            text-align: center;
            color: #333;
            font-size: 36px;
            margin-top: 50px;
        }

        p {
            text-align: center;
            color: #333;
            font-size: 18px;
        }

        .result-container {
            text-align: center;
            margin-top: 20px;
        }

        .result {
            color: #146A34;
            font-size: 24px;
        }

        .run-again {
            background-color: #333;
            color: #fff;
            border: none;
            padding: 10px 20px;
            font-size: 18px;
            border-radius: 5px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            margin-top: 20px;
        }

        .run-again:hover {
            background-color: #201f1f;
        }

        .disclaimer {
            color: #D3D3D3;
            font-size: 15px;
            margin-top: 23px;
            font-weight: bold;
        }

        /* Tip styles */
        .tip-container {
            margin-top: 10px;
            /* Adjusted margin to move it down */
        }

        .tip-text {
            color: #FF8000;
            font-size: 16px;
            font-weight: bold;
        }

        table {
            margin: auto;
        }
        .feedback-box {
            margin-top: 20px;
            padding: 10px;
            background-color: #ffffff;
            border: 1px solid #ccc;
            border-radius: 5px;
            width: 300px; /* Adjust width as needed */
            margin: auto; /* Center the box */
            margin-top: 50px;
        }

        .feedback-input {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 3px;
            resize: vertical;
        }

        .feedback-button {
            background-color: #333;
            color: #fff;
            border: none;
            padding: 10px 20px;
            font-size: 18px;
            border-radius: 5px;
            cursor: pointer;
        }

        .feedback-button:hover {
            background-color: #201f1f;
        }
    </style>
<h1>Result:</h1>
<p class="tip-text">Online Tip: Add coupon items Separately to your cart before applying the code.</p>


  <p class="tip-text">If you want to save or share this coupon. <a  class = "tip-text" href="#" onclick="copyLink(event)">Copy the Link</a></p>

<div class="result-container">
    <div class="result-container">
        <table bgcolor="#f8f7ee" border="0" cellpadding="0" cellspacing="0" width="600">
            <tbody>
                <tr>
                    <td valign="top">
                        <table cellpadding="0" cellspacing="0">
                            <tbody>
                                <tr>
                                    <td valign="top">
                                        <a href="https://www.pandaexpress.com" style="border: 0; text-decoration: none; color: rgba(209, 40, 46, 1)">
                                            <img alt="THANK YOU for your feedback!" border="0" height="160" src="https://www.pandaguestexperience.com/Projects/PRG2_CSI/images/emailer/smg-px-hero-ty-01.png" width="600">
                                        </a>
                                    </td>
                                </tr>
                                <tr>
                                    <td valign="top">
                                        <div style="background-color: rgba(255, 255, 255, 1); display: none; font-family: Arial, Helvetica, sans-serif; color: rgba(255, 255, 255, 1); font-size: 0; height: 0; line-height: 0; padding: 0; text-align: center">
                                            <a href="#" style="border: 0; text-decoration: none; color: rgba(209, 40, 46, 1)">
                                                <img alt="THANK YOU for your feedback!" height="auto" src="https://www.pandaguestexperience.com/Projects/PRG2_CSI/images/emailer/smg-px-hero-ty-02.png" width="320">
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td valign="top">
                                        <table bgcolor="#ffffff" cellpadding="0" cellspacing="0" width="100%">
                                            <tbody>
                                                <tr>
                                                    <td width="40"> </td>
                                                </tr>
                                                <tr>
                                                    <td valign="top">
                                                        <table border="0" cellpadding="0" cellspacing="0">
                                                            <tbody>
                                                                <tr>
                                                                    <td>
                                                                        <table border="0" cellpadding="0" cellspacing="0">
                                                                            <tbody>
                                                                                <tr>
                                                                                    <tr>
                                                                                        <td align="center">
                                                                                            <img alt="Present this barcode at your next in-store purchase" src="https://www.pandaguestexperience.com/Common/controls/IDAutomation/Barcode.aspx?D={{ code }}&amp;LM=.25&amp;TM=0&amp;ST=F" width="200">
                                                                                        </td>
                                                                                        
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td width="20" style="font-size:20px;line-height:20px">&nbsp;</td>
                                                                                      </tr>
                                                                                    
                                                                                        <td valign="top" align="center" >
                                                                                            <span style="font-family: &quot;Montserrat&quot;, Arial, sans-serif !important"><strong>{{ code }}</strong></span>
                                                                                        </td>
                                                                                    
                                                                                
                                                                            </tbody>
                                                                        </table>
                                                                    </td>
                                                                    <td>
                                                                        <table border="0" cellpadding="0" cellspacing="0">
                                                                            <tbody>
                                                                                <tr>
                                                                                    <td>
                                                                                        <img alt="" src="https://www.pandaguestexperience.com/Projects/PRG2_CSI/images/emailer/smg-px-coupon-d.png" width="263" style="margin-left:50px">
                                                                                    </td>
                                                                                </tr>
                                                                            </tbody>
                                                                        </table>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </td>
                                </tr>
                                <tr>
                                    <td valign="top">
                                        <table bgcolor="#ffffff" cellpadding="0" cellspacing="0" width="100%">
                                            <tbody>
                                                <tr>
                                                    <td valign="top">
                                                        <span style="font-family: &quot;Gotham&quot;, &quot;Montserrat&quot;, Arial, sans-serif !important">
                                                            Offer will expire on <strong>{{ safeexpiredate }}</strong>. This coupon code is good for one-time use only and is limited to one coupon code per order. Valid only at participating locations and online at PandaExpress.com or on the Panda Express app. <strong>No additional charge for premium entrée.</strong>  Delivery, tax and other fees still apply. Cannot be combined with any other offer, discount, or promotion. Cash value of 1/100 cent. Panda Restaurant Group, Inc. reserves the right to modify or discontinue the offer at any time and additional restrictions may apply.
                                                        </span>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td valign="top">
                        <table bgcolor="#f8f7ee" border="0" cellpadding="0" cellspacing="0" width="600">
                            <tbody>
                                <tr>
                                    <td valign="top">
                                        <table border="0" cellpadding="0" cellspacing="0" width="600">
                                            <tbody>
                                                <tr>
                                                    <td>
                                                        
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="feedback-box">
        <h2>Feedback</h2>
        <textarea class="feedback-input" id="feedback-text" placeholder=""></textarea>
        <button class="feedback-button" onclick="sendFeedback()">Send</button>
    </div>
</div>

<script>
    function sendFeedback() {
        // Get the feedback text
        var feedbackText = document.getElementById('feedback-text').value;
        
        // Send a POST request to /sendfeedback with the feedback data
        fetch('/sendfeedback', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ feedback: feedbackText })
        })
        .then(response => {
            if (response.ok) {
                console.log('Feedback sent successfully');
                // Hide the feedback box after sending feedback
                document.querySelector('.feedback-box').style.display = 'none';
            } else {
                console.error('Failed to send feedback');
                // Handle error if needed
            }
        })
        .catch(error => {
            console.error('Error sending feedback:', error);
            // Handle error if needed
        });
    }
</script>
    <script>
        function copyLink(event) {
            event.preventDefault(); // Prevent the default behavior of the link
            // Get the current URL
            var url = window.location.href;

            // Copy the URL to the clipboard
            navigator.clipboard.writeText(url)
                .then(function() {
                    // Provide feedback to the user
                    console.log("Link copied to clipboard: " + url);
                })
                .catch(function(error) {
                    // Handle any errors
                    console.error("Unable to copy link: ", error);
                });
        }
    </script>

{% endblock %}
